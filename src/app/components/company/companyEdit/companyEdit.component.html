<div style="overflow-y: scroll; width: 100%; top: 130px; bottom: 0px; position: absolute">
    <div class="container">
        <div class="row justify-content-md-center" [hidden]="isPromiseDone">
            <mat-spinner></mat-spinner>
        </div>
        <form *ngIf="company" [formGroup]="form">
            <br>
            <div class="row justify-content-center">
                <div class="col">
                    <mat-form-field class="example-full-width">
                        <input matInput placeholder="ID Compañía" disabled value="{{company.CompanyId}}"
                               i18n-placeholder="input field | input field which displays the companies id@@CompanyIdInput">
                    </mat-form-field>
                </div>
            </div>
            <br>
            <div class="row justify-content-center">
                <div class="col-md-12">
                    <mat-form-field class="example-full-width">
                        <input matInput placeholder="Compañía" [(ngModel)]="company.CompanyName"
                               [formControl]="form.controls['companyName']"
                               i18n-placeholder="input field | input field which contains the company's name@@CompanyNameInput"
                               required>
                        <mat-error *ngIf="form.controls['companyName'].hasError('required')"
                                   i18n="message | letting the user know that they need to enter their password@@PasswordRequiredMessage">
                            El nombre de la compañía es <strong>Requerido</strong>
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-md-12">
                    <mat-form-field class="example-full-width">
                        <input matInput placeholder="RFC" [(ngModel)]="company.CompanyRFC"
                               [formControl]="form.controls['companyRFC']"
                               i18n-placeholder="input field | input field which contains the company's RFC code@@CompanyRFCInput"
                               required>
                        <mat-error *ngIf="form.controls['companyRFC'].hasError('required')"
                                   i18n="message | letting the user know that they need to enter their password@@PasswordRequiredMessage">
                            El RFC de la compañía es <strong>Requerido</strong>
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-md-12">
                    <mat-form-field class="example-full-width">
                        <input matInput placeholder="Dirección" [(ngModel)]="company.Address1" [ngModelOptions]="{standalone: true}"
                               i18n-placeholder="input field | input field which contains the company's address@@CompanyAdressInput">
                    </mat-form-field>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-md-12">
                    <mat-form-field class="example-full-width">
                        <input matInput [(ngModel)]="company.Address2" [ngModelOptions]="{standalone: true}"
                               i18n-placeholder="input field | input field which contains the company's address@@CompanyAdressInput">
                    </mat-form-field>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <mat-form-field class="example-full-width">
                        <input matInput placeholder="Ciudad" [(ngModel)]="company.City" [ngModelOptions]="{standalone: true}"
                               i18n-placeholder="input field | input field which contains the companys' city@@CompanyCityInput">
                    </mat-form-field>
                </div>
                <div class="col-md-6">
                    <small id="emailHelp" class="form-text text-muted">Estado</small>
                    <mat-select placeholder="Estado" [(ngModel)]="company.State" [ngModelOptions]="{standalone: true}"
                                style="padding: 10px 15px 14px 15px;">
                        <mat-option *ngFor="let state of states.codes" [value]="state">
                            {{ state }}
                        </mat-option>
                    </mat-select>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-md-12">
                    <mat-form-field class="example-full-width">
                        <input matInput placeholder="Código Postal" [(ngModel)]="company.PostalCode"
                               [formControl]="form.controls['companyZipCode']" pattern="^[0-9]{5}$"
                               i18n-placeholder="input field | input field which contains the company's zip code@@CompanyPostalCode"
                               maxlength="5" minlength="5">
                        <mat-error *ngIf="form.controls['companyZipCode'].hasError('pattern')"
                                   i18n="message | letting the user know that they need to enter their password@@PasswordRequiredMessage">
                            El Código Postal debe contener exactamente <strong>5 dígitos</strong>
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-md-12">
                    <mat-form-field class="example-full-width">
                        <input matInput placeholder="Correo de Facturación" [(ngModel)]="company.BillingEmailAddress"
                               type="email" [formControl]="form.controls['billingEmail']"
                               i18n-placeholder="input field | input field which contains the company's RFC code@@CompanyRFCInput"
                               required email>
                        <mat-error *ngIf="form.controls['billingEmail'].hasError('email')"
                                   i18n="message | letting the user know that they need to enter their password@@PasswordRequiredMessage">
                            El Correo de Facturación debe ser un <strong>Correo Electrónico</strong>
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <mat-form-field class="example-full-width">
                        <input matInput placeholder="Correo de Soporte" [(ngModel)]="company.SupportEmail"
                               type="email" [formControl]="form.controls['supportEmail']"
                               i18n-placeholder="input field | input field which contains the company's RFC code@@CompanyRFCInput"
                               required email>
                        <mat-error *ngIf="form.controls['supportEmail'].hasError('email')"
                                   i18n="message | letting the user know that they need to enter their password@@PasswordRequiredMessage">
                            El Correo de Soporte debe ser un <strong>Correo Electrónico</strong>
                        </mat-error>
                    </mat-form-field>
                </div>
                <div class="col-md-6">
                    <mat-form-field class="example-full-width">
                        <input matInput placeholder="Teléfono de Soporte" [(ngModel)]="company.SupportPhone"
                               name=supportPhone maxlength="25"
                               [formControl]="form.controls['supportPhone']"
                               i18n-placeholder="input field | input field which contains the company's RFC code@@CompanyRFCInput"
                               required>
                        <mat-error *ngIf="form.controls['supportPhone'].hasError('required')"
                                   i18n="message | letting the user know that they need to enter their password@@PasswordRequiredMessage">
                            El Teléfono de Soporte es <strong>Requerido</strong>
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <mat-form-field class="example-full-width">
                        <input matInput placeholder="Firmas Restantes" [(ngModel)]="company.SignatureBalance"
                               [ngModelOptions]="{standalone: true}"
                               i18n-placeholder="input field | input field which contains the companys' city@@CompanyCityInput"
                               readonly>
                    </mat-form-field>
                </div>
                <div class="col-md-6">
                    <mat-form-field class="example-full-width">
                        <input matInput placeholder="SMS Restantes" [(ngModel)]="company.SMSBalance"
                               [ngModelOptions]="{standalone: true}"
                               i18n-placeholder="input field | input field which contains the companys' city@@CompanyCityInput"
                               readonly>
                    </mat-form-field>
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col-md-4">
                    <mat-checkbox class="example-margin" color="primary" [checked]="company.Emails"
                                  (change)="company.Emails = !company.Emails">¿Enviar recibos firmados por correo?
                    </mat-checkbox>
                </div>
                <div class="col-md-4"></div>
                <div class="col-md-4">
                    <button mat-raised-button color="primary" (click)=showPurchaseDialog()>Historial de compras</button>
                </div>
            </div>
            <br>
            <div class="row">
                <div class="col">
                    <mat-form-field class="example-full-width">
                        <input matInput placeholder="API Key" value="{{company.ApiKey}}" readonly
                               [ngModelOptions]="{standalone: true}"
                               [(ngModel)]="company.ApiKey" i18n-placeholder="@@CompanyRFCInput">
                    </mat-form-field>
                </div>
            </div>
            <br>
            <br>
            <br>
            <div class="row justify-content-center">
                <div class="col-md-4 text-center">
                    <button mat-raised-button color="primary" (click)=updateCompany() style="width: 100%;"
                            i18n="action | button which will save the company info@@SaveButton"
                            [disabled]="!form.valid"> Guardar
                    </button>
                    <small [ngClass]="form.valid ? 'text-secondary': 'text-danger'">* Por favor revisa todos los campos requeridos.</small>
                </div>
            </div>
            <br>
            <br>
            <br>
            <hr>
            <h2>Cargar tus recibos de nóminas:</h2>
            <table class="table">
                <tr>
                    <td>
                        <input-file style="padding-bottom:15px" (change)="onFileSelectDemo($event)"
                                    accept="text/xml,application/pdf">
                            <span class="nofiles">Seleccionar archivo &nbsp;</span> &nbsp; &nbsp; &nbsp;
                            <span class="selected">Archivos Seleccionados</span>
                        </input-file>
                    </td>
                    <td>
                        <button mat-raised-button color="primary"
                                (click)="uploadDocuments()" i18n="@@UpdateButton"
                                [disabled]="selectedFiles.length < 1 || !showBtn">
                            Cargar documentos
                        </button>
                    </td>
                </tr>
            </table>
            <mat-spinner [diameter]="35" [strokeWidth]="4" style="margin:0 auto;"
                         *ngIf="countFiles == totalFiles && totalFiles > 0 && !showBtn"></mat-spinner>
            <br>
            <table class="table table-striped table-style table-responsive">
                <tbody>
                <tr *ngFor="let f of selectedFiles">
                    <td>{{f.XmlName}}</td>
                    <td>{{f.PdfName}}</td>
                    <td>{{f.Status}}</td>
                    <td>
                        <i class="material-icons" [hidden]="f.StatusBol" style="color: #e53935">block</i>
                        <i class="material-icons" [hidden]="!f.StatusBol" style="color: #2e7d32">check_circle_outline</i>
                    </td>
                </tr>
                </tbody>
            </table>
            <br/><br/>
            <br>
            <br>
            <br>
            <hr>
            <h2>Cargar tu Logo:</h2>
            <small>Antes de cargar tu logo por favor toma en cuenta las siguientes recomendaciones:</small>
            <br>
            <small>1.- Los formatos admitidos son; jpg, jpeg, tif y png.</small>
            <br>
            <small>2.- El alto máximo permitido de la imagen es 140 px y el mínimo de 70 px.</small>
            <br>
            <small>3.- El ancho máximo permitido de la imagen es 170 px.</small>
            <br>
            <br>
            <div class="row justify-content-center">
                <div class="col-md-4">
                    <input type="file" name="file" id="file" class="inputfile" (change)="onImageSelected($event)"
                           accept="image/jpeg,image/png,image/tiff" [disabled]="!isPromiseDone"/>
                    <label for="file">Selecciona tu Archivo</label>
                </div>
                <div class="col-md-4"></div>
                <div class="col-md-4 text-center">
                    <button mat-raised-button color="primary" (click)="uploadLogoImage()"
                            [hidden]="!imgValid || height > 150 || height < 70 || width > 180"
                            [disabled]="!isPromiseDone">Cargar Logo</button>
                    <br>
                    <img style="padding: 10px;" #previewImage [hidden]="!imgValid || height > 150 || height < 70 || width > 180" [src]="url">

                </div>
            </div>
            <br>
            <br>
            <div class="alert alert-danger" [hidden]="imgValid">
                Hay algun error con la imagen a cargar.
                <br>
                <p [hidden]="height <= 150 && height >= 70">* La imagen seleccionada no cumple con los requisitos de alto. Actual: {{height}}</p>
                <p [hidden]="width <= 180">* La imagen seleccionada no cumple con los requisitos de ancho. Actual: {{width}}</p>
            </div>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
            <br>
        </form>
    </div>
</div>
